(this["webpackJsonpconcurrent-react-overview"]=this["webpackJsonpconcurrent-react-overview"]||[]).push([[0],{17:function(e,a,t){},23:function(e,a,t){e.exports=t(42)},32:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(12),s=t.n(c),l=(t(20),t(8),t(6)),o=t(10),u=t(2),i=t.n(u),m=t(19),d=t.n(m),p=new Map;function f(e,a){var t=function(e,t){if(!p.has(e)){var n={promise:a(t),status:"pending",value:null};n.promise.then((function(e){n.status="resolved",n.value=e}),(function(e){n.status="error",n.value=e})),p.set(e,n)}};return{read:function(a){var n="".concat(e,":").concat(a);t(n,a);var r=p.get(n);switch(r.status){case"pending":throw r.promise;case"resolved":return r.value;case"error":throw r.value;default:return}},prefetch:function(a){var n="".concat(e,":").concat(a);t(n,a)}}}function v(e){return new Promise((function(a,t){setTimeout((function(){a(e)}),e)}))}var E=function(e){var a,t,n,r=arguments;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:0,c.next=3,i.a.awrap(fetch(e));case 3:return t=c.sent,c.next=6,i.a.awrap(t.json());case 6:return n=c.sent,c.next=9,i.a.awrap(v(a+1e3*Math.random()));case 9:return c.abrupt("return",n);case 10:case"end":return c.stop()}}))};t(32);function b(){return r.a.createElement("div",{className:"wrapper-header"},r.a.createElement("h2",null," Concurrent Mode Example"))}t(17);var h=function(e){(function(e){return f(e,(function(){return new Promise((function(a){var t=new Image;t.onload=function(){a(e)},t.onerror=function(e){console.error(e),a(e)},t.src=e}))}))})(e).read()};function g(e){var a=e.src;return null!=a&&h(a),r.a.createElement("img",{className:"suspense-image",src:e.src,alt:e.alt,onClick:e.onClick?e.onClick:void 0})}t(33);function w(){return r.a.createElement("div",{className:" loader"})}t(34);function N(e){return r.a.createElement("div",{className:"wrapper-user-cards ".concat(e.isSelected?"wrapper-user-cards--active":""," ")},r.a.createElement("div",null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"user-thumbnail ".concat(e.isSelected?"user-thumbnail--active":""," ")},r.a.createElement(w,null))},r.a.createElement("div",{className:"user-thumbnail ".concat(e.isSelected?"user-thumbnail--active":""," ")},r.a.createElement(g,{src:"https://i.pravatar.cc/256?img=".concat(e.userData.id+5),alt:"user-dp",onClick:function(){e.handleUserData(e.userData.id)}})))),r.a.createElement("div",{className:"user-data"},r.a.createElement("div",null,e.userData.name,r.a.createElement("span",null,e.userData.userName))),r.a.createElement("div",null,e.isPending?r.a.createElement("div",{className:"wrapper-loader"},r.a.createElement(w,null)," "):null))}t(35),t(36);var j=function(e){var a=e.data.posts.read();return r.a.createElement("div",{className:"wrapper-comments"},a.map((function(e,a){return r.a.createElement("div",{className:"comment-card"},r.a.createElement("div",{className:"comment-data"},e.body),r.a.createElement("div",{className:"comment-by"},e.email))})))},O=(t(37),function(e){var a={posts:f("posts:".concat(e),(function(){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(E("https://jsonplaceholder.typicode.com/comments?postId=".concat(e),600));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}))};return Object(o.a)({},a)});function S(e){var a=e.userData;console.log("props",e);var t=Object(n.useState)(O(e.userId)),c=Object(l.a)(t,2),s=c[0],o=c[1];console.log("id :",e.userId+5),Object(n.useEffect)((function(){o(O(e.userId))}),[e.userId]);return r.a.createElement("div",{className:"wrapper-user-profile"},r.a.createElement("div",{className:"profile"},r.a.createElement(n.SuspenseList,{revealOrder:"forwards",tail:"collapsed"},r.a.createElement("div",{className:"profile-top-section"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"user-image"},r.a.createElement(w,null))},r.a.createElement("div",{className:"user-image"},r.a.createElement(g,{src:"https://i.pravatar.cc/256?img=".concat(e.userId+5),alt:"user-dp"}))),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"loading userDetails....",r.a.createElement(w,null))},r.a.createElement(D,{data:a}))),r.a.createElement("div",{className:"comments-section"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"loading user posts ....",r.a.createElement(w,null))},r.a.createElement(j,{data:s}))))))}function D(e){var a=e.data.user.read();return console.log(a),r.a.createElement("div",{className:"user-details"},r.a.createElement("div",null,"name :",a.name),r.a.createElement("div",null,"email :",a.email),r.a.createElement("div",null,"company :",a.company.name," "))}var x=function(e){console.log("loading userData... ",e);var a={user:f("user:".concat(e),(function(){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(E("https://jsonplaceholder.typicode.com/users/".concat(e),2e3));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}))};return Object(o.a)({},a)},I={timeoutMs:3e3};function k(e){var a=L(),t=a.dataSource,c=(a.friendId,t.userListData.read()),s=Object(n.useState)(x(1)),o=Object(l.a)(s,2),u=o[0],i=o[1],m=Object(n.useTransition)(I),d=Object(l.a)(m,2),p=d[0],f=d[1];Object(n.useEffect)((function(){return console.log("FINISHED RENDERING",Date.now())}),[]),console.log("COMPLETED LOOPING and rendering");var v=Object(n.useState)(1),E=Object(l.a)(v,2),b=E[0],h=E[1],g=Object(n.useCallback)((function(e){console.log("setUserData id :",e),h(e),p((function(){console.log("startTransition  called "),i(x(e))}))}),[p]);return console.log("isPending",f),console.log("isPending --\x3e re-render:",u),console.log("activeUserId :",b),r.a.createElement("div",{className:"wrapper-user-list"},r.a.createElement("div",{className:"friend-list"},c.map((function(e,a){return r.a.createElement("div",{className:"user-list-item"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading friend ",r.a.createElement(w,null)," ")},r.a.createElement(N,{isSelected:e.id===b,userData:e,thumbnailUrl:"https://i.pravatar.cc/256?img=".concat(e.id+5),handleUserData:g,isPending:f&&e.id===b})))}))),u&&r.a.createElement(n.Suspense,{fallback:w},r.a.createElement("div",{className:"user-profile-section"},r.a.createElement(S,{userData:u,userId:b}))))}var y=Object(n.createContext)(null),L=function(){return Object(n.useContext)(y)};function C(e){var a=Object(n.useState)(1),t=Object(l.a)(a,2),c=t[0],s=(t[1],Object(n.useState)(function(e){var a={userListData:f("userListData",(function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(E("https://jsonplaceholder.typicode.com/users",0));case 2:return e.t0=6+Math.floor(5*Math.random()),e.abrupt("return",e.sent.slice(0,e.t0));case 4:case"end":return e.stop()}}))})),commentsList:f("commentList",(function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(E("https://jsonplaceholder.typicode.com/comments",0));case 2:return e.abrupt("return",e.sent.slice(0,100));case 3:case"end":return e.stop()}}))}))};return Object(o.a)({},a,{prefetch:function(){a.userListData.prefetch(),a.commentsList.prefetch()}})}())),u=Object(l.a)(s,2),m=u[0],p=(u[1],{dataSource:m,friendId:c});return r.a.createElement(r.a.StrictMode,null,r.a.createElement("div",{className:"app"},r.a.createElement(b,null),r.a.createElement(d.a,{FallbackComponent:function(e){return console.log(e.error),r.a.createElement("div",null," Error loading data ")}},r.a.createElement(y.Provider,{value:p},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null," loading .....")},r.a.createElement("div",{className:"wrapper-home"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"loading-users"}," Loading users ...")},r.a.createElement(k,null))))))))}t(41);if(window.location.pathname.includes("/normal-mode-example"))s.a.render(r.a.createElement(C,null),document.getElementById("root"));else{var M=document.getElementById("root");s.a.createRoot(M).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)))}}},[[23,1,2]]]);
//# sourceMappingURL=main.591b90fb.chunk.js.map