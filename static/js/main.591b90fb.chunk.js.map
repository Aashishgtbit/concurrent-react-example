{"version":3,"sources":["utils/cacheApi.js","utils/service.js","components/Header/index.js","utils/imageCache.js","components/Loader/index.jsx","components/UserCard/index.jsx","components/CommentsCard/index.jsx","components/UserProfile/index.jsx","components/ActiveUserList/index.jsx","components/SearchBar/index.jsx","App.jsx","index.jsx"],"names":["dataSourceCache","Map","createDataSource","fetchId","fetch","getData","key","input","has","dataSource","promise","status","value","then","data","error","set","read","result","get","prefetch","promiseTimeout","time","Promise","resolve","reject","setTimeout","customFetch","url","a","async","timeout","response","json","jsonData","Math","random","Header","className","loadImage","source","image","Image","onload","onerror","console","src","cacheImage","MySuspenseImage","props","alt","onClick","undefined","Loader","UserCard","isSelected","fallback","userData","id","handleUserData","name","userName","isPending","comments","posts","map","comment","index","body","email","loadUserPosts","userId","UserProfile","log","useState","postData","setPosts","useEffect","revealOrder","tail","UserDetails","CommentsCard","user","company","loadUserData","SUSPENSE_CONFIG","timeoutMs","ActiveUsersList","useData","friends","friendId","userListData","setData","useTransition","startTransition","Date","now","activeUserId","setActiveUserId","setUserData","useCallback","friend","thumbnailUrl","DataContext","createContext","useContext","App","floor","slice","commentsList","makeDataSource","context","StrictMode","FallbackComponent","Provider","window","location","pathname","includes","ReactDOM","render","document","getElementById","rootElement","createRoot"],"mappings":"kcAAMA,EAAkB,IAAIC,IAEb,SAASC,EAAiBC,EAASC,GAChD,IAAMC,EAAU,SAACC,EAAKC,GACpB,IAAKP,EAAgBQ,IAAIF,GAAM,CAC7B,IAAMG,EAAa,CACjBC,QAASN,EAAMG,GACfI,OAAQ,UACRC,MAAO,MAETH,EAAWC,QAAQG,MACjB,SAAAC,GACEL,EAAWE,OAAS,WACpBF,EAAWG,MAAQE,KAErB,SAAAC,GACEN,EAAWE,OAAS,QACpBF,EAAWG,MAAQG,KAGvBf,EAAgBgB,IAAIV,EAAKG,KAoC7B,MAhCmB,CACjBQ,KADiB,SACZV,GAEH,IAAMD,EAAG,UAAMH,EAAN,YAAiBI,GAC1BF,EAAQC,EAAKC,GACb,IAAMW,EAASlB,EAAgBmB,IAAIb,GAGnC,OAAQY,EAAOP,QACb,IAAK,UAEH,MADkBO,EAAOR,QAG3B,IAAK,WAEH,OADcQ,EAAON,MAGvB,IAAK,QAEH,MADcM,EAAON,MAIvB,QAEE,SAGNQ,SA3BiB,SA2BRb,GACP,IAAMD,EAAG,UAAMH,EAAN,YAAiBI,GAC1BF,EAAQC,EAAKC,KCrDZ,SAASc,EAAeC,GAC7B,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACTF,EAAQF,KACPA,MAIP,IACaK,EAAc,SAAOC,GAAP,+BAAAC,EAAAC,OAAA,uDAAYC,EAAZ,+BADT,EACS,WAAAF,EAAA,MACFzB,MAAMwB,IADJ,cACnBI,EADmB,kBAAAH,EAAA,MAEFG,EAASC,QAFP,cAEnBC,EAFmB,kBAAAL,EAAA,MAGnBR,EAAeU,EAA0B,IAAhBI,KAAKC,WAHX,gCAIlBF,GAJkB,uC,MCPZ,SAASG,IAgBtB,OACE,yBAAKC,UAAU,kBAmBb,yD,MCjBC,IAAMC,EAAY,SAAAC,IAjBlB,SAAoBA,GAczB,OAbiBtC,EAAiBsC,GAAQ,WACxC,OAAO,IAAIjB,SAAQ,SAAAC,GACjB,IAAMiB,EAAQ,IAAIC,MAClBD,EAAME,OAAS,WACbnB,EAAQgB,IAEVC,EAAMG,QAAU,SAAA7B,GACd8B,QAAQ9B,MAAMA,GACdS,EAAQT,IAEV0B,EAAMK,IAAMN,SAOhBO,CAAWP,GAAQvB,QAEN,SAAS+B,EAAgBC,GAAQ,IACtCH,EAAQG,EAARH,IAIR,OAHW,MAAPA,GACFP,EAAUO,GAGV,yBACER,UAAU,iBACVQ,IAAKG,EAAMH,IACXI,IAAKD,EAAMC,IACXC,QAASF,EAAME,QAAUF,EAAME,aAAUC,I,MChChC,SAASC,IACtB,OAAO,yBAAKf,UAAU,Y,MCKT,SAASgB,EAASL,GAI/B,OACE,yBACEX,UAAS,6BACPW,EAAMM,WAAa,6BAA+B,GAD3C,MAIT,6BACE,kBAAC,WAAD,CACEC,SACE,yBACElB,UAAS,yBACPW,EAAMM,WAAa,yBAA2B,GADvC,MAIT,kBAACF,EAAD,QAWJ,yBACEf,UAAS,yBACPW,EAAMM,WAAa,yBAA2B,GADvC,MAIT,kBAACP,EAAD,CACEF,IAAG,wCAAmCG,EAAMQ,SAASC,GAAK,GAC1DR,IAAI,UACJC,QAAS,WACPF,EAAMU,eAAeV,EAAMQ,SAASC,UAM9C,yBAAKpB,UAAU,aACb,6BACGW,EAAMQ,SAASG,KAChB,8BAAOX,EAAMQ,SAASI,YAI1B,6BACGZ,EAAMa,UACL,yBAAKxB,UAAU,kBACb,kBAACe,EAAD,MAAW,KAEX,O,gBC7DG,WAASJ,GACtB,IAAMc,EAAWd,EAAMnC,KAAKkD,MAAM/C,OAElC,OACE,yBAAKqB,UAAU,oBACZyB,EAASE,KAAI,SAACC,EAASC,GACtB,OACE,yBAAK7B,UAAU,gBACb,yBAAKA,UAAU,gBAAgB4B,EAAQE,MACvC,yBAAK9B,UAAU,cAAc4B,EAAQG,aCDpCC,G,MAAgB,SAAAC,GAC3B,IAAM9D,EAAa,CACjBuD,MAAO9D,EAAiB,SAAD,OAAUqE,IAAU,oBAAA1C,EAAAC,OAAA,kEAAAD,EAAA,MAC5BF,EAAY,wDAAD,OACkC4C,GACxD,MAHuC,iFAQ7C,OAAO,eAAK9D,KAGC,SAAS+D,EAAYvB,GAClC,IAAMnC,EAAOmC,EAAMQ,SACnBZ,QAAQ4B,IAAI,QAASxB,GAFoB,MAGZyB,mBAASJ,EAAcrB,EAAMsB,SAHjB,mBAGlCI,EAHkC,KAGxBC,EAHwB,KAOzC/B,QAAQ4B,IAAI,OAAQxB,EAAMsB,OAAS,GACnCM,qBAAU,WAIRD,EAASN,EAAcrB,EAAMsB,WAC5B,CAACtB,EAAMsB,SAKV,OACE,yBAAKjC,UAAU,wBACb,yBAAKA,UAAU,WACb,kBAAC,eAAD,CAAcwC,YAAY,WAAWC,KAAK,aACxC,yBAAKzC,UAAU,uBACb,kBAAC,WAAD,CACEkB,SACE,yBAAKlB,UAAU,cACb,kBAACe,EAAD,QAIJ,yBAAKf,UAAU,cACb,kBAACU,EAAD,CACEF,IAAG,wCAAmCG,EAAMsB,OAAS,GACrDrB,IAAI,cAKV,kBAAC,WAAD,CACEM,SACE,uDAEE,kBAACH,EAAD,QAIJ,kBAAC2B,EAAD,CAAalE,KAAMA,MAGvB,yBAAKwB,UAAU,oBACb,kBAAC,WAAD,CACEkB,SACE,uDAEE,kBAACH,EAAD,QAIJ,kBAAC4B,EAAD,CAAcnE,KAAM6D,SASlC,SAASK,EAAY/B,GACnB,IAAMiC,EAAOjC,EAAMnC,KAAKoE,KAAKjE,OAI7B,OAFA4B,QAAQ4B,IAAIS,GAGV,yBAAK5C,UAAU,gBACb,sCAAY4C,EAAKtB,MACjB,uCAAasB,EAAKb,OAClB,yCAAea,EAAKC,QAAQvB,KAA5B,MChFC,IAAMwB,EAAe,SAAAb,GAC1B1B,QAAQ4B,IAAI,uBAAwBF,GACpC,IAAM9D,EAAa,CACjByE,KAAMhF,EAAiB,QAAD,OAASqE,IAAU,oBAAA1C,EAAAC,OAAA,kEAAAD,EAAA,MAC1BF,EAAY,8CAAD,OACwB4C,GAC9C,MAHqC,iFAQ3C,OAAO,eAAK9D,IAGD4E,EAAkB,CAAEC,UAAW,KAE7B,SAASC,EAAgBtC,GAAQ,IAAD,EACZuC,IAAzB/E,EADqC,EACrCA,WACFgF,GAFuC,EACzBC,SACJjF,EAAWkF,aAAa1E,QAFK,EAGrByD,mBAASU,EAAa,IAHD,mBAGtCtE,EAHsC,KAGhC8E,EAHgC,OAIRC,wBAAcR,GAJN,mBAItCS,EAJsC,KAIrBhC,EAJqB,KAa7Ce,qBAAU,kBAAMhC,QAAQ4B,IAAI,qBAAsBsB,KAAKC,SAAQ,IAE/DnD,QAAQ4B,IAAI,mCAfiC,MAiBLC,mBAAS,GAjBJ,mBAiBtCuB,EAjBsC,KAiBxBC,EAjBwB,KAmBvCC,EAAcC,uBAClB,SAAA1C,GACEb,QAAQ4B,IAAI,mBAAoBf,GAChCwC,EAAgBxC,GAChBoC,GAAgB,WACdjD,QAAQ4B,IAAI,4BACZmB,EAAQR,EAAa1B,SAGzB,CAACoC,IAQH,OALAjD,QAAQ4B,IAAI,YAAaX,GAEzBjB,QAAQ4B,IAAI,8BAA4B3D,GAExC+B,QAAQ4B,IAAI,iBAAkBwB,GAE5B,yBAAK3D,UAAU,qBACb,yBAAKA,UAAU,eACZmD,EAAQxB,KAAI,SAACoC,EAAQlC,GACpB,OACE,yBAAK7B,UAAU,kBACb,kBAAC,WAAD,CACEkB,SACE,+CACiB,kBAACH,EAAD,MAAW,MAI9B,kBAACC,EAAD,CACEC,WAAY8C,EAAO3C,KAAOuC,EAC1BxC,SAAU4C,EACVC,aAAY,wCAAmCD,EAAO3C,GACpD,GACFC,eAAgBwC,EAChBrC,UAAWA,GAAauC,EAAO3C,KAAOuC,UAOjDnF,GACC,kBAAC,WAAD,CAAU0C,SAAUH,GAClB,yBAAKf,UAAU,wBACb,kBAACkC,EAAD,CAAaf,SAAU3C,EAAMyD,OAAQ0B,OCnGjD,ICOMM,EAAcC,wBAAc,MACrBhB,EAAU,kBAAMiB,qBAAWF,IA2BzB,SAASG,EAAIzD,GAAQ,IAAD,EACDyB,mBAAS,GADR,mBAC1BgB,EAD0B,aAEGhB,mBA3Bf,SAAAH,GACrB,IAAM9D,EAAa,CACjBkF,aAAczF,EAAiB,gBAAgB,oBAAA2B,EAAAC,OAAA,kEAAAD,EAAA,MAErCF,EAAY,6CAA8C,IAFrB,mBAGlC,EAAIQ,KAAKwE,MAAsB,EAAhBxE,KAAKC,UAHc,yBAG3CwE,MAAM,EAHqC,+CAK/CC,aAAc3G,EAAiB,eAAe,oBAAA2B,EAAAC,OAAA,kEAAAD,EAAA,MAEpCF,EAAY,gDAAiD,IAFzB,uCAG1CiF,MAAM,EAAG,MAHiC,yCAYhD,OAAO,eACFnG,EADL,CAEEW,SAPe,WACfX,EAAWkF,aAAavE,WACxBX,EAAWoG,aAAazF,cAWmB0F,KAFZ,mBAE1BrG,EAF0B,KAG3BsG,GAH2B,KAGjB,CACdtG,aACAiF,aAEF,OACE,kBAAC,IAAMsB,WAAP,KACE,yBAAK1E,UAAU,OACb,kBAACD,EAAD,MACA,kBAAC,IAAD,CACE4E,kBAAmB,SAAAhE,GAEjB,OADAJ,QAAQ4B,IAAIxB,EAAMlC,OACX,uDAGT,kBAACwF,EAAYW,SAAb,CAAsBtG,MAAOmG,GAC3B,kBAAC,WAAD,CAAUvD,SAAU,gDAClB,yBAAKlB,UAAU,gBACb,kBAAC,WAAD,CACEkB,SACE,yBAAKlB,UAAU,iBAAf,uBAGF,kBAACiD,EAAD,a,MCtDlB,GADmB4B,OAAOC,SAASC,SAASC,SAAS,wBAEnDC,IAASC,OAAO,kBAACd,EAAD,MAASe,SAASC,eAAe,aAC5C,CACL,IAAMC,EAAcF,SAASC,eAAe,QAC5CH,IAASK,WAAWD,GAAaH,OAC/B,kBAAC,IAAMR,WAAP,KACE,kBAACN,EAAD,W","file":"static/js/main.591b90fb.chunk.js","sourcesContent":["const dataSourceCache = new Map();\n\nexport default function createDataSource(fetchId, fetch) {\n  const getData = (key, input) => {\n    if (!dataSourceCache.has(key)) {\n      const dataSource = {\n        promise: fetch(input),\n        status: \"pending\",\n        value: null\n      };\n      dataSource.promise.then(\n        data => {\n          dataSource.status = \"resolved\";\n          dataSource.value = data;\n        },\n        error => {\n          dataSource.status = \"error\";\n          dataSource.value = error;\n        }\n      );\n      dataSourceCache.set(key, dataSource);\n    }\n  };\n\n  const dataSource = {\n    read(input) {\n      // console.log(input);\n      const key = `${fetchId}:${input}`;\n      getData(key, input);\n      const result = dataSourceCache.get(key);\n      // console.log(\"result :\", result);\n\n      switch (result.status) {\n        case \"pending\": {\n          const suspender = result.promise;\n          throw suspender;\n        }\n        case \"resolved\": {\n          const value = result.value;\n          return value;\n        }\n        case \"error\": {\n          const error = result.value;\n          throw error;\n        }\n\n        default:\n          // unexpected case ...\n          return undefined;\n      }\n    },\n    prefetch(input) {\n      const key = `${fetchId}:${input}`;\n      getData(key, input);\n    }\n  };\n  return dataSource;\n}\n","export function promiseTimeout(time) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      resolve(time);\n    }, time);\n  });\n}\n\nconst extraTime = 0;\nexport const customFetch = async (url, timeout = extraTime) => {\n  const response = await fetch(url);\n  const jsonData = await response.json();\n  await promiseTimeout(timeout + Math.random() * 1000);\n  return jsonData;\n};\n","import React, { useState } from \"react\";\nimport \"./style.scss\";\nexport default function Header() {\n  // const [modeValue, setModeValue] = useState(\n  //   window.location.pathname.includes(\"/normal-mode-example\")\n  //     ? \"Normal Mode\"\n  //     : \"Concurrent Mode\"\n  // );\n  // const handleModeChange = event => {\n  //   console.log(\"mode value\", event.target.value);\n  //   if (event.target.value === \"concurrentMode\") {\n  //     setModeValue(\"Concurrent Mode\");\n  //     window.location.replace(\"/concurrent-mode-example\");\n  //   } else {\n  //     setModeValue(\"Normal Mode\");\n  //     window.location.replace(\"/normal-mode-example\");\n  //   }\n  // };\n  return (\n    <div className=\"wrapper-header\">\n      {/* <div>\n        <input\n          type=\"radio\"\n          name=\"mode\"\n          value=\"normalMode\"\n          onChange={handleModeChange}\n          checked={modeValue !== \"Concurrent Mode\"}\n        />{\" \"}\n        Normal Mode\n        <input\n          type=\"radio\"\n          name=\"mode\"\n          value=\"concurrentMode\"\n          checked={modeValue === \"Concurrent Mode\"}\n          onChange={handleModeChange}\n        />{\" \"}\n        Concurrent Mode\n      </div> */}\n      <h2> Concurrent Mode Example</h2>\n    </div>\n  );\n}\n","import React from \"react\";\nimport createDataSource from \"./cacheApi\";\nimport \"../styles.scss\";\n\nexport function cacheImage(source) {\n  const resource = createDataSource(source, () => {\n    return new Promise(resolve => {\n      const image = new Image();\n      image.onload = () => {\n        resolve(source);\n      };\n      image.onerror = error => {\n        console.error(error);\n        resolve(error);\n      };\n      image.src = source;\n    });\n  });\n  return resource;\n}\n\nexport const loadImage = source => {\n  cacheImage(source).read();\n};\nexport default function MySuspenseImage(props) {\n  const { src } = props;\n  if (src != null) {\n    loadImage(src);\n  }\n  return (\n    <img\n      className=\"suspense-image\"\n      src={props.src}\n      alt={props.alt}\n      onClick={props.onClick ? props.onClick : undefined}\n    />\n  );\n}\n\n/** @ExperimentalCode  */\n\n// const imagePromise = new Promise(resolve => {\n//   console.log(\"source :\", source);\n//   const image = new Image();\n\n//   image.onload = () => {\n//     resolve(source);\n//   };\n//   image.onerror=(error)=> {\n//     console.error(error);\n//     resolve(error);\n//   }\n//   image.src = source;\n// });\n\n// return handlePromise(imagePromise);\n\n// function handlePromise(promise) {\n//   let status = \"pending\";\n//   let result;\n//   // console.log(\"promise\", promise);\n\n//   let suspender = promise.then(\n//     res => {\n//       status = \"success\";\n//       result = res.target;\n//     },\n//     err => {\n//       status = \"error\";\n//       result = err;\n//     }\n//   );\n\n//   return {\n//     read() {\n//       if (status === \"pending\") {\n//         throw suspender;\n//       } else if (status === \"error\") {\n//         throw result;\n//       } else {\n//         return result;\n//       }\n//     }\n//   };\n// }\n","import React from \"react\";\nimport \"./style.scss\";\nexport default function Loader() {\n  return <div className=\" loader\" />;\n}\n","import React, { useState, Suspense } from \"react\";\n\nimport imageCache from \"../../utils/imageCache\";\nimport Loader from \"../Loader\";\n\nimport \"./style.scss\";\nimport MySuspenseImage from \"../../utils/imageCache\";\n\nexport default function UserCard(props) {\n  // const [imageData, loadImageData] = useState(\n  //   imageCache(`https://i.pravatar.cc/256?img=${props.userData.id + 5}`)\n  // );\n  return (\n    <div\n      className={`wrapper-user-cards ${\n        props.isSelected ? \"wrapper-user-cards--active\" : \"\"\n      } `}\n    >\n      <div>\n        <Suspense\n          fallback={\n            <div\n              className={`user-thumbnail ${\n                props.isSelected ? \"user-thumbnail--active\" : \"\"\n              } `}\n            >\n              <Loader />\n            </div>\n          }\n        >\n          {/* <Thumbnail\n            imgData={imageData}\n            isSelected={props.isSelected}\n            onClick={() => {\n              props.handleUserData(props.userData.id);\n            }}\n          /> */}\n          <div\n            className={`user-thumbnail ${\n              props.isSelected ? \"user-thumbnail--active\" : \"\"\n            } `}\n          >\n            <MySuspenseImage\n              src={`https://i.pravatar.cc/256?img=${props.userData.id + 5}`}\n              alt=\"user-dp\"\n              onClick={() => {\n                props.handleUserData(props.userData.id);\n              }}\n            />\n          </div>\n        </Suspense>\n      </div>\n      <div className=\"user-data\">\n        <div>\n          {props.userData.name}\n          <span>{props.userData.userName}</span>\n        </div>\n        {/* <div>{props.userData.company.name}</div> */}\n      </div>\n      <div>\n        {props.isPending ? (\n          <div className=\"wrapper-loader\">\n            <Loader />{\" \"}\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\n// function Thumbnail({ imgData, onClick, isSelected }) {\n//   const data = imgData.read();\n\n//   return (\n//     <img\n//       className={`user-thumbnail ${\n//         isSelected ? \"user-thumbnail--active\" : \"\"\n//       } `}\n//       src={data.src}\n//       alt=\"user-dp\"\n//       onClick={onClick}\n//     />\n//   );\n// }\n","import React from \"react\";\nimport \"./style.scss\";\n\nexport default function(props) {\n  const comments = props.data.posts.read();\n\n  return (\n    <div className=\"wrapper-comments\">\n      {comments.map((comment, index) => {\n        return (\n          <div className=\"comment-card\">\n            <div className=\"comment-data\">{comment.body}</div>\n            <div className=\"comment-by\">{comment.email}</div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React, { Suspense, useState, SuspenseList, useEffect } from \"react\";\nimport { loadUserData } from \"../ActiveUserList\";\nimport Header from \"../../components/Header\";\nimport createDataSource from \"../../utils/cacheApi\";\nimport { customFetch } from \"../../utils/service\";\nimport imageCache from \"../../utils/imageCache\";\nimport CommentsCard from \"../CommentsCard\";\nimport Loader from \"../Loader\";\nimport \"./style.scss\";\nimport MySuspenseImage from \"../../utils/imageCache\";\n\nexport const loadUserPosts = userId => {\n  const dataSource = {\n    posts: createDataSource(`posts:${userId}`, async () => {\n      return await customFetch(\n        `https://jsonplaceholder.typicode.com/comments?postId=${userId}`,\n        600\n      );\n    })\n  };\n\n  return { ...dataSource };\n};\n\nexport default function UserProfile(props) {\n  const data = props.userData;\n  console.log(\"props\", props);\n  const [postData, setPosts] = useState(loadUserPosts(props.userId));\n  // const [imgData, loadImageData] = useState(\n  //   imageCache(`https://i.pravatar.cc/256?img=${props.userId + 5}`)\n  // );\n  console.log(\"id :\", props.userId + 5);\n  useEffect(() => {\n    // loadImageData(\n    //   imageCache(`https://i.pravatar.cc/256?img=${props.userId + 5}`)\n    // );\n    setPosts(loadUserPosts(props.userId));\n  }, [props.userId]);\n\n  const handleButtonClick = e => {\n    console.log(\"handleButton Click called\");\n  };\n  return (\n    <div className=\"wrapper-user-profile\">\n      <div className=\"profile\">\n        <SuspenseList revealOrder=\"forwards\" tail=\"collapsed\">\n          <div className=\"profile-top-section\">\n            <Suspense\n              fallback={\n                <div className=\"user-image\">\n                  <Loader />\n                </div>\n              }\n            >\n              <div className=\"user-image\">\n                <MySuspenseImage\n                  src={`https://i.pravatar.cc/256?img=${props.userId + 5}`}\n                  alt=\"user-dp\"\n                />\n              </div>\n            </Suspense>\n\n            <Suspense\n              fallback={\n                <div>\n                  loading userDetails....\n                  <Loader />\n                </div>\n              }\n            >\n              <UserDetails data={data} />\n            </Suspense>\n          </div>\n          <div className=\"comments-section\">\n            <Suspense\n              fallback={\n                <div>\n                  loading user posts ....\n                  <Loader />\n                </div>\n              }\n            >\n              <CommentsCard data={postData} />\n            </Suspense>\n          </div>\n        </SuspenseList>\n      </div>\n    </div>\n  );\n}\n\nfunction UserDetails(props) {\n  const user = props.data.user.read();\n\n  console.log(user);\n\n  return (\n    <div className=\"user-details\">\n      <div>name :{user.name}</div>\n      <div>email :{user.email}</div>\n      <div>company :{user.company.name} </div>\n    </div>\n  );\n}\n\n// function UserImage({ imageData }) {\n//   const data = imageData.read();\n//   console.log(\"data : \", data);\n//   return <img className=\"user-image\" src={data.src} alt=\"user-dp\" />;\n// }\n","import React, {\n  useContext,\n  useCallback,\n  useTransition,\n  useState,\n  useMemo,\n  Suspense,\n  useEffect\n} from \"react\";\n// import { withRouter } from \"react-router-dom\";\nimport UserCard from \"../UserCard\";\nimport { useData } from \"../../App\";\nimport \"./style.scss\";\nimport createDataSource from \"../../utils/cacheApi\";\nimport { customFetch } from \"../../utils/service\";\nimport UserProfile, { loadUserPosts } from \"../UserProfile\";\n// import { resolve } from \"url\";\n// import { reject } from \"q\";\nimport Loader from \"../Loader\";\n\nexport const loadUserData = userId => {\n  console.log(\"loading userData... \", userId);\n  const dataSource = {\n    user: createDataSource(`user:${userId}`, async () => {\n      return await customFetch(\n        `https://jsonplaceholder.typicode.com/users/${userId}`,\n        2000\n      );\n    })\n  };\n\n  return { ...dataSource };\n};\n\nexport const SUSPENSE_CONFIG = { timeoutMs: 3000 };\n\nexport default function ActiveUsersList(props) {\n  const { dataSource, friendId } = useData();\n  const friends = dataSource.userListData.read();\n  const [data, setData] = useState(loadUserData(1));\n  const [startTransition, isPending] = useTransition(SUSPENSE_CONFIG);\n  // const userList = [];\n  // for (let i = 0; i < 10; i++) {\n  //   userList.push(...friends);\n  //   if (i === 999) {\n  //     console.log(\"finished looping at\", Date.now());\n  //   }\n  // }\n\n  useEffect(() => console.log(\"FINISHED RENDERING\", Date.now()), []);\n\n  console.log(\"COMPLETED LOOPING and rendering\");\n  // console.log(\"userList :\", userList);\n  const [activeUserId, setActiveUserId] = useState(1);\n\n  const setUserData = useCallback(\n    id => {\n      console.log(\"setUserData id :\", id);\n      setActiveUserId(id);\n      startTransition(() => {\n        console.log(\"startTransition  called \");\n        setData(loadUserData(id));\n      });\n    },\n    [startTransition]\n  );\n\n  console.log(\"isPending\", isPending);\n\n  console.log(\"isPending --> re-render:\", data);\n\n  console.log(\"activeUserId :\", activeUserId);\n  return (\n    <div className=\"wrapper-user-list\">\n      <div className=\"friend-list\">\n        {friends.map((friend, index) => {\n          return (\n            <div className=\"user-list-item\">\n              <Suspense\n                fallback={\n                  <div>\n                    Loading friend <Loader />{\" \"}\n                  </div>\n                }\n              >\n                <UserCard\n                  isSelected={friend.id === activeUserId ? true : false}\n                  userData={friend}\n                  thumbnailUrl={`https://i.pravatar.cc/256?img=${friend.id +\n                    5}`}\n                  handleUserData={setUserData}\n                  isPending={isPending && friend.id === activeUserId}\n                />\n              </Suspense>\n            </div>\n          );\n        })}\n      </div>\n      {data && (\n        <Suspense fallback={Loader}>\n          <div className=\"user-profile-section\">\n            <UserProfile userData={data} userId={activeUserId} />\n          </div>\n        </Suspense>\n      )}\n    </div>\n  );\n}\n","import React, { useCallback } from \"react\";\n\nconst SearchBar = props => {\n  const onChange = useCallback(\n    e => {\n      console.log(e.target.value);\n      if (props.onChange) {\n        props.onChange(e.target.value);\n      }\n    },\n    [props]\n  );\n\n  return (\n    <div className=\"wrapper-search-bar\">\n      <input\n        className=\"search-bar\"\n        placeholder=\"search comments\"\n        onChange={onChange}\n        value={props.value}\n      />\n    </div>\n  );\n};\n\nexport default SearchBar;\n","import React, { Suspense, useState, createContext, useContext } from \"react\";\nimport ErrorBoundary from \"react-error-boundary\";\nimport createDataSource from \"./utils/cacheApi\";\nimport { customFetch } from \"./utils/service\";\nimport Header from \"./components/Header\";\nimport ActiveUsersList from \"./components/ActiveUserList\";\nimport FilterList from \"./components/FilterList\";\nimport \"./styles.scss\";\n\nconst DataContext = createContext(null);\nexport const useData = () => useContext(DataContext);\n\nconst makeDataSource = userId => {\n  const dataSource = {\n    userListData: createDataSource(\"userListData\", async () => {\n      return (\n        await customFetch(\"https://jsonplaceholder.typicode.com/users\", 0)\n      ).slice(0, 6 + Math.floor(Math.random() * 5));\n    }),\n    commentsList: createDataSource(\"commentList\", async () => {\n      return (\n        await customFetch(\"https://jsonplaceholder.typicode.com/comments\", 0)\n      ).slice(0, 100);\n    })\n  };\n\n  const prefetch = () => {\n    dataSource.userListData.prefetch();\n    dataSource.commentsList.prefetch();\n  };\n\n  return {\n    ...dataSource,\n    prefetch\n  };\n};\n\nexport default function App(props) {\n  const [friendId, setFriendId] = useState(1);\n  const [dataSource, setDataSource] = useState(makeDataSource(friendId));\n  const context = {\n    dataSource,\n    friendId\n  };\n  return (\n    <React.StrictMode>\n      <div className=\"app\">\n        <Header />\n        <ErrorBoundary\n          FallbackComponent={props => {\n            console.log(props.error);\n            return <div> Error loading data </div>;\n          }}\n        >\n          <DataContext.Provider value={context}>\n            <Suspense fallback={<div> loading .....</div>}>\n              <div className=\"wrapper-home\">\n                <Suspense\n                  fallback={\n                    <div className=\"loading-users\"> Loading users ...</div>\n                  }\n                >\n                  <ActiveUsersList />\n                  {/* <FilterList commentsList={dataSource.commentsList} /> */}\n                </Suspense>\n              </div>\n            </Suspense>\n          </DataContext.Provider>\n        </ErrorBoundary>\n      </div>\n    </React.StrictMode>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// import App from \"./App\";\nimport AppBootUp from \"./containers/AppBootUp\";\nimport \"./assets/styles/bootstrap/bootstrap.scss\";\nimport App from \"./App\";\n\nconst normalMode = window.location.pathname.includes(\"/normal-mode-example\");\nif (normalMode) {\n  ReactDOM.render(<App />, document.getElementById(\"root\"));\n} else {\n  const rootElement = document.getElementById(\"root\");\n  ReactDOM.createRoot(rootElement).render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  );\n}\n"],"sourceRoot":""}